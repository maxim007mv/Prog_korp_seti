# AI –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–ü—Ä–æ–µ–∫—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å DeepSeek API –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.

## üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. NLP-–ø–æ–∏—Å–∫ –ø–æ –º–µ–Ω—é (`/menu`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `AiSearchBar`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞–º –∏—Å–∫–∞—Ç—å –±–ª—é–¥–∞ –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ.

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**
- "–±–µ–∑ –≥–ª—é—Ç–µ–Ω–∞ –¥–æ 700‚ÇΩ"
- "–æ—Å—Ç—Ä–æ–µ –º—è—Å–æ"
- "–ª–µ–≥–∫–∏–π —Å–∞–ª–∞—Ç"
- "–¥–µ—Å–µ—Ä—Ç —Å —à–æ–∫–æ–ª–∞–¥–æ–º"
- "–≤–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ–µ –≥–æ—Ä—è—á–µ–µ"

**–§—É–Ω–∫—Ü–∏–∏:**
- üé§ **–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥** (Web Speech API)
- üß† **NLP –∞–Ω–∞–ª–∏–∑** –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ DeepSeek
- üìä **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å–æ—Å—Ç–∞–≤—É, —Ç–µ–≥–∞–º, —Ü–µ–Ω–µ
- üí¨ **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** –æ—Ç AI
- üîÑ **Fallback** –Ω–∞ –æ–±—ã—á–Ω—ã–π –ø–æ–∏—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ API

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `searchMenuWithAI()` –∏–∑ `lib/ai/deepseek.ts`
- –ü–µ—Ä–µ–¥–∞–µ—Ç –≤—Å–µ –±–ª—é–¥–∞ –º–µ–Ω—é –≤ –ø—Ä–æ–º–ø—Ç
- AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ ID –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –±–ª—é–¥ + –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
- –ü—Ä–∏ –≤—ã–±–æ—Ä–µ AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã

### 2. AI Upsell —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (`/staff/orders/[id]`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `AiUpsellPanel`

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–ª—é–¥–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –∑–∞–∫–∞–∑—É.

**–õ–æ–≥–∏–∫–∞:**
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞
- –ö –æ—Å–Ω–æ–≤–Ω—ã–º –±–ª—é–¥–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≥–∞—Ä–Ω–∏—Ä—ã, —Å–æ—É—Å—ã, –Ω–∞–ø–∏—Ç–∫–∏
- –ö —Å–∞–ª–∞—Ç–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ö–ª–µ–± –∏–ª–∏ —Å—É–ø—ã
- –ö –≥–æ—Ä—è—á–µ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –¥–µ—Å–µ—Ä—Ç—ã
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –≤–∫—É—Å–æ–≤ (–∫ –æ—Å—Ç—Ä–æ–º—É ‚Äî –æ—Å–≤–µ–∂–∞—é—â–µ–µ)
- –ù–µ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–ª—é–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –≤ –∑–∞–∫–∞–∑–µ

**UI:**
- –ö—Ä–∞—Å–∏–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º
- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
- –ü—Ä–∏—á–∏–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ—Ç AI
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (confidence 0-1)
- –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å –≤ –∑–∞–∫–∞–∑"
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getUpsellSuggestions()` –∏–∑ `lib/ai/deepseek.ts`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∑–∞–∫–∞–∑–∞
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–∑–∏—Ü–∏–π
- Fallback –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ API

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

`.env`:
```bash
# –í–∫–ª—é—á–∏—Ç—å AI —Ñ—É–Ω–∫—Ü–∏–∏
FEATURE_AI=true

# DeepSeek API –∫–ª—é—á
DEEPSEEK_API_KEY=sk-f6e4ca3f948f4a96ba0926760f12c9d8
```

### API –∫–ª–∏–µ–Ω—Ç

`lib/ai/deepseek.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `callDeepSeek()` ‚Äî –±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek API
- `searchMenuWithAI()` ‚Äî NLP –ø–æ–∏—Å–∫ –ø–æ –º–µ–Ω—é
- `getUpsellSuggestions()` ‚Äî AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–æ–ø—Ä–æ–¥–∞–∂
- `getDailySummary()` ‚Äî AI –¥–∞–π–¥–∂–µ—Å—Ç –¥–Ω—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–æ–¥–µ–ª—å:** `deepseek-chat`
**Temperature:** 0.7 (–±–∞–ª–∞–Ω—Å –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —Ç–æ—á–Ω–æ—Å—Ç–∏)
**Max tokens:** 1000

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

### –î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –º–µ–Ω—é:

**System Prompt:**
- –†–æ–ª—å: "–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞"
- –î–∞–Ω–Ω—ã–µ: –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é –≤ JSON
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —Å–æ—Å—Ç–∞–≤, —Ç–µ–≥–∏, —Ü–µ–Ω—É, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

**User Prompt:**
- –ó–∞–ø—Ä–æ—Å –∫–ª–∏–µ–Ω—Ç–∞
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∞–Ω–∞–ª–∏–∑—É

**–û—Ç–≤–µ—Ç AI:**
```json
{
  "dishes": [1, 5, 12],
  "explanation": "–ù–∞—à—ë–ª 3 –±–ª—é–¥–∞: –°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å..."
}
```

### –î–ª—è upsell:

**System Prompt:**
- –†–æ–ª—å: "AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –ø–æ upsell"
- –î–∞–Ω–Ω—ã–µ: –ø–æ–ª–Ω–æ–µ –º–µ–Ω—é –≤ JSON
- –ü—Ä–∞–≤–∏–ª–∞: —Å–æ—á–µ—Ç–∞–Ω–∏—è –±–ª—é–¥, –±–∞–ª–∞–Ω—Å –≤–∫—É—Å–æ–≤, –º–∞–∫—Å 3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

**User Prompt:**
- –¢–µ–∫—É—â–∏–π –∑–∞–∫–∞–∑ –≤ JSON

**–û—Ç–≤–µ—Ç AI:**
```json
{
  "suggestions": [
    {
      "dishId": 5,
      "reason": "–°–∞–ª–∞—Ç –¶–µ–∑–∞—Ä—å –æ—Ç–ª–∏—á–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç —Å—Ç–µ–π–∫",
      "confidence": 0.9
    }
  ]
}
```

## üé® UX –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### AiSearchBar:
1. –ò–∫–æ–Ω–∫–∞ ‚ú® Sparkles –¥–ª—è AI —Ñ—É–Ω–∫—Ü–∏–π
2. –ö–Ω–æ–ø–∫–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π pulse –ø—Ä–∏ –∑–∞–ø–∏—Å–∏
3. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –≤–∏–¥–µ —á–∏–ø—Å–æ–≤
4. –û–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ü–≤–µ—Ç–Ω–æ–º –±–ª–æ–∫–µ

### AiUpsellPanel:
1. –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω (accent/10 ‚Üí accent/5)
2. –ö–Ω–æ–ø–∫–∞ "–û–±–Ω–æ–≤–∏—Ç—å" –¥–ª—è —Ä—É—á–Ω–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
3. –ö–∞—Ä—Ç–æ—á–∫–∏ —Å —Ç–µ–Ω—è–º–∏ –∏ hover —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
4. –ó–µ–ª–µ–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä confidence
5. –°–æ—Å—Ç–æ—è–Ω–∏—è: loading, error, empty, success

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **CORS:** DeepSeek API –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –∫–ª–∏–µ–Ω—Ç–∞, –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å CORS
   - **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å API Route –≤ Next.js `/api/ai/search` –∏ `/api/ai/upsell`

2. **Rate Limiting:** DeepSeek –º–æ–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, debounce –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–¢–æ–∫–µ–Ω—ã:** –î–ª–∏–Ω–Ω–æ–µ –º–µ–Ω—é –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤
   - **–†–µ—à–µ–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ ID, –∏–º—è, –∫–∞—Ç–µ–≥–æ—Ä–∏—é, —Ü–µ–Ω—É, —Ç–µ–≥–∏

4. **–°—Ç–æ–∏–º–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å —Ç—Ä–∞—Ç–∏—Ç —Ç–æ–∫–µ–Ω—ã
   - **–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–≤–æ—Ç—ã, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

## üöÄ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –°–æ–∑–¥–∞—Ç—å Next.js API Routes –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ DeepSeek
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ AI —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (Redis/Memory)
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ upsell (–∫–æ–Ω–≤–µ—Ä—Å–∏—è, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫)
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ AI –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] Fine-tuning –º–æ–¥–µ–ª–∏ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞
- [ ] –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å AI (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏)
- [ ] AI –¥–∞–π–¥–∂–µ—Å—Ç –¥–Ω—è –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ –∞–¥–º–∏–Ω–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ChatGPT/Claude –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –í –∫–æ–¥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/menu`:
```tsx
import { AiSearchBar } from '@/components/features/menu/AiSearchBar';

<AiSearchBar
  allDishes={menuData?.dishes || []}
  onSearchResults={(dishIds, explanation) => {
    setAiFilteredIds(dishIds);
  }}
/>
```

### –í –∫–æ–¥–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/staff/orders/[id]`:
```tsx
import { AiUpsellPanel } from '@/components/features/orders/AiUpsellPanel';

<AiUpsellPanel
  order={order}
  allDishes={menuData?.dishes || []}
  onAddDish={(dishId) => {
    // –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ –≤ –∑–∞–∫–∞–∑
  }}
/>
```

---

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º DeepSeek API** ü§ñ
